;Author:Adriano Pereira
;All-purporse programm
;V:2019.03.25
 
;General Configurations-----------------------------------
N100 $AC_TIMER[1]=0	;Start Timer
N110 G91		; RELATIVE COORDINATES
N120 G71		; METRIC SYSTEM
N130 G64		; CONTINUOUS PATH MODE
N140 M55		; MOVE LASER MIRROR TO HOME
N150 G4F4		; DELAY 4 SECONDS
N270 M0	   	; WAIT FOR USER INPUT

;R-Parameters----------------------------------------------
N170 R0=15            ;LASER POWER
N180 R1=0             ;FEED RATE PROCESS ON
N190 R2=0             ;FEED RATE PROCESS OFF
N200 R3=0          		;POWDER FLOW
N210 R4=0          		;X-AXIS

;Process Start-up------------------------------------------
N240 M56		          ;SET CHANNEL 1 AS LASER SOURCE
N250 G4F4		          ;DELAY 4 SECONDS TO POSITION THE MIRROR
N260 M78           	  ;GAS 1 ON
;N260 M76            	;CROSSJET ON
N270 M0	   	  	      ;WAIT FOR USER INPUT
 
;Laser On and Path-----------------------------------------

N280 M64		  ;CARRIER ON
;N290 H2=R3	  ;SET POWDER FLOW
;N300 M62		  ;POWDER MIXER ON
;N310 M66		  ;POWDER FEED ON
;N320 G4 F4	  ;DELAY FOR POWDER STABILIZATION

N330 H1=R0
N340 ID=1 WHEN $AC_TIMER[1]>=0 DO M50 
N300 G4 F0.5
N340 ID=1 WHEN $AC_TIMER[1]>=0 DO M51 

N330 M65		;CARRIER OFF
;N340 M63		;POWDER MIXER OFF
;N350 M67		;POWDER FEED OFF
 
;End of Program--------------------------------------------
N360 G4 F3
;N320 M77       ;CROSSJET OFF
N370 M79        ;GAS 1 OFF
N380 M55		    ;HOME LASER RESSONATOR
N390 M30		    ;PROGRAM END
